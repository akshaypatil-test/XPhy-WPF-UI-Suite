<UserControl x:Class="x_phy_wpf_ui.Controls.SettingsComponent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="900">
    <UserControl.Resources>
        <!-- Unselected Theme Card Style -->
        <Style x:Key="ThemeCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource Brush.Surface}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Secondary}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="40"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinHeight" Value="180"/>
        </Style>
        
        <!-- Selected Theme Card Style with Gradient Background -->
        <Style x:Key="ThemeCardSelectedStyle" TargetType="Border">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1AB4CC" Offset="0"/>
                        <GradientStop Color="#6B2A9E" Offset="0.5"/>
                        <GradientStop Color="#E2156B" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1AB4CC" Offset="0"/>
                        <GradientStop Color="#E2156B" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="40"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinHeight" Value="180"/>
        </Style>
        
        <Style x:Key="UpdateCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource Brush.Surface}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Secondary}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="24"/>
        </Style>
        
        <Style x:Key="InfoCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource Brush.Surface}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Secondary}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="20,16"/>
        </Style>
        
        <!-- Field Row Style with Background (compact for System Info card) -->
        <Style x:Key="FieldRowStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource Brush.Card}"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="Settings" 
                       FontSize="28" 
                       FontWeight="Bold" 
                       Foreground="{DynamicResource Brush.TextPrimary}"/>
            <TextBlock Text="Manage Your Application Preferences And View System Information" 
                       FontSize="14" 
                       Foreground="{DynamicResource Brush.TextSecondary}" 
                       Margin="0,6,0,0"/>
        </StackPanel>

        <!-- Main Content: Left (Theme + Update) | Right (System Info) -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="24"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- LEFT COLUMN: Theme Selection + Update Controls -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Theme Cards - Side by Side -->
                <Grid Grid.Row="0" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Light Theme Card -->
                    <Border x:Name="LightThemeCard" 
                            Grid.Column="0"
                            Style="{StaticResource ThemeCardStyle}"
                            MouseLeftButtonDown="LightTheme_Click">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Viewbox Width="60" Height="60" Margin="0,0,0,16">
                                <Path x:Name="LightThemeIcon"
                                      Data="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" 
                                      Fill="{DynamicResource Brush.TextPrimary}"
                                      Stretch="Uniform"/>
                            </Viewbox>
                            <TextBlock x:Name="LightThemeText"
                                       Text="Light Theme" 
                                       FontSize="18" 
                                       FontWeight="SemiBold" 
                                       Foreground="{DynamicResource Brush.TextPrimary}" 
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Dark Theme Card -->
                    <Border x:Name="DarkThemeCard" 
                            Grid.Column="2"
                            Style="{StaticResource ThemeCardSelectedStyle}"
                            MouseLeftButtonDown="DarkTheme_Click">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Viewbox Width="60" Height="60" Margin="0,0,0,16">
                                <Path x:Name="DarkThemeIcon"
                                      Data="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" 
                                      Fill="White"
                                      Stretch="Uniform"/>
                            </Viewbox>
                            <TextBlock x:Name="DarkThemeText"
                                       Text="Dark Theme" 
                                       FontSize="18" 
                                       FontWeight="SemiBold" 
                                       Foreground="White" 
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Update Controls (background set in code for Settings-only light cyan in light theme) -->
                <Border x:Name="UpdateControlsCard" Grid.Row="1" Style="{StaticResource UpdateCardStyle}" VerticalAlignment="Stretch">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <TextBlock Text="Update Controls" 
                                       FontSize="18" 
                                       FontWeight="SemiBold" 
                                       Foreground="{DynamicResource Brush.TextPrimary}"/>
                            <Button Content="Check for Updates"
                                    HorizontalAlignment="Right"
                                    Background="{DynamicResource Brush.Primary}"
                                    Foreground="{DynamicResource Brush.White}"
                                    FontSize="13"
                                    FontWeight="SemiBold"
                                    Padding="16,8"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Click="CheckUpdates_Click">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}" 
                                                            CornerRadius="8" 
                                                            Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" 
                                                                          VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>
                        <TextBlock Text="Check For Available Updates Or Install The Latest Version Manually. Updates May Include New Features, Bug Fixes, And Security Improvements." 
                                   FontSize="13" 
                                   Foreground="{DynamicResource Brush.TextSecondary}" 
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- RIGHT COLUMN: System Information & Updates (background set in code for Settings-only light cyan in light theme) -->
            <Border x:Name="SystemInfoCard" Grid.Column="2" Style="{StaticResource InfoCardStyle}" VerticalAlignment="Stretch">
                <StackPanel>
                    <TextBlock Text="System Information &amp; Updates" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource Brush.TextPrimary}" 
                               Margin="0,0,0,10"/>
                    
                    <TextBlock Text="Version Information" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource Brush.TextPrimary}" 
                               Margin="0,0,0,8"/>
                    
                    <!-- Application Version -->
                    <Border Style="{StaticResource FieldRowStyle}">
                        <Grid>
                            <TextBlock Text="Application Version" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextSecondary}"/>
                            <TextBlock x:Name="AppVersionText" 
                                       Text="V3.2.1" 
                                       FontSize="13" 
                                       FontWeight="SemiBold" 
                                       Foreground="{DynamicResource Brush.Secondary}" 
                                       HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>
                    
                    <!-- Build Number -->
                    <Border Style="{StaticResource FieldRowStyle}">
                        <Grid>
                            <TextBlock Text="Build Number" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextSecondary}"/>
                            <TextBlock x:Name="BuildNumberText" 
                                       Text="2023.11.28.1342" 
                                       FontSize="13" 
                                       FontWeight="SemiBold" 
                                       Foreground="{DynamicResource Brush.Secondary}" 
                                       HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>
                    
                    <!-- Release Date -->
                    <Border Style="{StaticResource FieldRowStyle}" Margin="0,0,0,10">
                        <Grid>
                            <TextBlock Text="Release Date" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextSecondary}"/>
                            <TextBlock x:Name="ReleaseDateText" 
                                       Text="November 28, 2023" 
                                       FontSize="13" 
                                       FontWeight="SemiBold" 
                                       Foreground="{DynamicResource Brush.Secondary}" 
                                       HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>
                    
                    <TextBlock Text="Update Status" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource Brush.TextPrimary}" 
                               Margin="0,0,0,8"/>
                    
                    <!-- Current Status -->
                    <Border Style="{StaticResource FieldRowStyle}">
                        <Grid>
                            <TextBlock Text="Current Status" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextSecondary}"/>
                            <Border Background="{DynamicResource Brush.Success}" 
                                    CornerRadius="4" 
                                    Padding="8,4" 
                                    HorizontalAlignment="Right">
                                <TextBlock Text="Up to date" 
                                           FontSize="11" 
                                           FontWeight="SemiBold" 
                                           Foreground="{DynamicResource Brush.White}"/>
                            </Border>
                        </Grid>
                    </Border>
                    
                    <!-- Last Checked -->
                    <Border Style="{StaticResource FieldRowStyle}">
                        <Grid>
                            <TextBlock Text="Last Checked" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextSecondary}"/>
                            <TextBlock x:Name="LastCheckedText" 
                                       Text="Just Now" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextPrimary}" 
                                       HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>
                    
                    <!-- Auto-Updates Toggle -->
                    <Border Style="{StaticResource FieldRowStyle}" Margin="0,0,0,0">
                        <Grid>
                            <TextBlock Text="Auto-Updates" 
                                       FontSize="13" 
                                       Foreground="{DynamicResource Brush.TextSecondary}"/>
                            <ToggleButton x:Name="AutoUpdatesToggle" 
                                          IsEnabled="False" 
                                          IsChecked="False" 
                                          Width="44" 
                                          Height="24" 
                                          HorizontalAlignment="Right">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="Track" 
                                                Background="{DynamicResource Brush.Border}" 
                                                CornerRadius="12" 
                                                Width="44" 
                                                Height="24">
                                            <Ellipse x:Name="Knob" 
                                                     Width="20" 
                                                     Height="20" 
                                                     Fill="{DynamicResource Brush.White}" 
                                                     HorizontalAlignment="Left" 
                                                     Margin="2,0,0,0" 
                                                     VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="Knob" Property="HorizontalAlignment" Value="Right"/>
                                                <Setter TargetName="Knob" Property="Margin" Value="0,0,2,0"/>
                                                <Setter TargetName="Track" Property="Background" Value="{DynamicResource Brush.Secondary}"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter TargetName="Track" Property="Opacity" Value="0.5"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>
