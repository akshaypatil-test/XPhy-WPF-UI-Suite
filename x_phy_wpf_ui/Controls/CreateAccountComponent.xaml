<UserControl x:Class="x_phy_wpf_ui.Controls.CreateAccountComponent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1000">
    <UserControl.Resources>
        <!-- No local resources needed - using centralized design system -->
    </UserControl.Resources>

    <Grid Background="Transparent">
        <!-- Main Content -->
        <ScrollViewer VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled">
            <StackPanel VerticalAlignment="Center" 
                        HorizontalAlignment="Left"
                        Width="400"
                        Margin="50,40,50,50">
                
                <!-- Title -->
                <TextBlock Text="Create Your Account" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           Foreground="{StaticResource TextPrimary}"
                           TextAlignment="Center"
                           Margin="0,0,0,8"/>
                
                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="0,0,0,32">
                    <TextBlock Text="Start Your Free 30-Day Trial" 
                               FontSize="14" 
                               Foreground="{StaticResource TextPrimary}"
                               TextAlignment="Center"/>
                    <TextBlock Text="No credit card required" 
                               FontSize="13" 
                               Foreground="{StaticResource PrimaryPink}"
                               TextAlignment="Center"
                               Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Error Message -->
                <TextBlock x:Name="ErrorMessageText"
                           Text="" 
                           FontSize="12" 
                           Foreground="#FF6B6B"
                           TextAlignment="Center"
                           TextWrapping="Wrap"
                           Margin="0,0,0,16"
                           Visibility="Collapsed"/>
                
                <!-- First Name Field -->
                <TextBlock Text="First Name" 
                           FontSize="12" 
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondary}"
                           Margin="0,0,0,10"/>
                <Border x:Name="FirstNameFieldBorder"
                        Background="{StaticResource InputBackground}"
                        BorderBrush="{StaticResource InputBorder}"
                        BorderThickness="1"
                        CornerRadius="8"
                        MinHeight="44"
                        Margin="0,0,0,8">
                    <Grid>
                        <TextBox x:Name="FirstNameTextBox"
                                 Style="{StaticResource ModernTextBoxInnerStyleFullWidth}"
                                 GotFocus="FirstNameTextBox_GotFocus"
                                 LostFocus="FirstNameTextBox_LostFocus"
                                 TextChanged="FirstNameTextBox_TextChanged"/>
                        <TextBlock x:Name="FirstNamePlaceholder"
                                   Text="Enter your first name"
                                   Foreground="{StaticResource TextSecondary}"
                                   FontSize="14"
                                   Margin="16,8,16,8"
                                   VerticalAlignment="Center"
                                   IsHitTestVisible="False"/>
                    </Grid>
                </Border>
                <TextBlock x:Name="FirstNameErrorText"
                           Text="" 
                           FontSize="11" 
                           Foreground="{StaticResource ErrorText}"
                           Margin="4,0,0,12"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>
                
                <!-- Last Name Field -->
                <TextBlock Text="Last Name" 
                           FontSize="12" 
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondary}"
                           Margin="0,0,0,10"/>
                <Border x:Name="LastNameFieldBorder"
                        Background="{StaticResource InputBackground}"
                        BorderBrush="{StaticResource InputBorder}"
                        BorderThickness="1"
                        CornerRadius="8"
                        MinHeight="44"
                        Margin="0,0,0,8">
                    <Grid>
                        <TextBox x:Name="LastNameTextBox"
                                 Style="{StaticResource ModernTextBoxInnerStyleFullWidth}"
                                 GotFocus="LastNameTextBox_GotFocus"
                                 LostFocus="LastNameTextBox_LostFocus"
                                 TextChanged="LastNameTextBox_TextChanged"/>
                        <TextBlock x:Name="LastNamePlaceholder"
                                   Text="Enter your last name"
                                   Foreground="{StaticResource TextSecondary}"
                                   FontSize="14"
                                   Margin="16,8,16,8"
                                   VerticalAlignment="Center"
                                   IsHitTestVisible="False"/>
                    </Grid>
                </Border>
                <TextBlock x:Name="LastNameErrorText"
                           Text="" 
                           FontSize="11" 
                           Foreground="{StaticResource ErrorText}"
                           Margin="4,0,0,12"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>
                
                <!-- Email Field (labeled Username per Figma) -->
                <TextBlock Text="Username" 
                           FontSize="12" 
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondary}"
                           Margin="0,0,0,10"/>
                <Border x:Name="EmailFieldBorder"
                        Background="{StaticResource InputBackground}"
                        BorderBrush="{StaticResource InputBorder}"
                        BorderThickness="1"
                        CornerRadius="8"
                        MinHeight="44"
                        Margin="0,0,0,8">
                    <Grid>
                        <TextBox x:Name="EmailTextBox"
                                 Style="{StaticResource ModernTextBoxInnerStyleFullWidth}"
                                 GotFocus="EmailTextBox_GotFocus"
                                 TextChanged="EmailTextBox_TextChanged"
                                 LostFocus="EmailTextBox_LostFocus"/>
                        <TextBlock x:Name="EmailPlaceholder"
                                   Text="Enter your email address"
                                   Foreground="{StaticResource TextSecondary}"
                                   FontSize="14"
                                   Margin="16,8,16,8"
                                   VerticalAlignment="Center"
                                   IsHitTestVisible="False"/>
                    </Grid>
                </Border>
                <TextBlock x:Name="EmailErrorText"
                           Text="" 
                           FontSize="11" 
                           Foreground="{StaticResource ErrorText}"
                           Margin="4,0,0,12"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>
                
                <!-- Password Field: label + Info icon for requirements popup -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Password" 
                               FontSize="12" 
                               FontWeight="Bold"
                               Foreground="{StaticResource TextSecondary}"
                               VerticalAlignment="Center"/>
                    <Button x:Name="PasswordInfoButton" Grid.Column="1"
                            Width="18" Height="18" Margin="6,0,0,0"
                            VerticalAlignment="Center"
                            Background="Transparent" BorderThickness="0"
                            Cursor="Hand" Click="PasswordInfoButton_Click"
                            ToolTip="Password requirements">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" 
                                        BorderBrush="{StaticResource TextSecondary}"
                                        BorderThickness="1" CornerRadius="9"
                                        Padding="0">
                                    <TextBlock Text="i" FontSize="11" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextSecondary}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Popup x:Name="PasswordRequirementsPopup" 
                           PlacementTarget="{Binding ElementName=PasswordInfoButton}"
                           Placement="Right" StaysOpen="False"
                           AllowsTransparency="True" PopupAnimation="Fade">
                        <Border Background="#252525" 
                                BorderBrush="{StaticResource InputBorder}"
                                BorderThickness="1" CornerRadius="8"
                                Padding="14,12" Margin="8,0,0,0"
                                MinWidth="220">
                            <StackPanel>
                                <TextBlock Text="Password requirements" 
                                           FontSize="12" FontWeight="SemiBold"
                                           Foreground="White"
                                           Margin="0,0,0,10"/>
                                <TextBlock Text="• Minimum 8 characters" FontSize="11" Foreground="#4ADE80" Margin="0,0,0,4"/>
                                <TextBlock Text="• One uppercase letter" FontSize="11" Foreground="#4ADE80" Margin="0,0,0,4"/>
                                <TextBlock Text="• One number" FontSize="11" Foreground="#4ADE80" Margin="0,0,0,4"/>
                                <TextBlock Text="• One special character" FontSize="11" Foreground="#4ADE80" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Border>
                    </Popup>
                </Grid>
                <Border x:Name="PasswordFieldBorder"
                        Background="{StaticResource InputBackground}"
                        BorderBrush="{StaticResource InputBorder}"
                        BorderThickness="1"
                        CornerRadius="8"
                        MinHeight="44"
                        Margin="0,0,0,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="0">
                            <PasswordBox x:Name="PasswordBox"
                                         Style="{StaticResource ModernPasswordBoxInnerStyle}"
                                         GotFocus="PasswordBox_GotFocus"
                                         PasswordChanged="PasswordBox_PasswordChanged"
                                         LostFocus="PasswordBox_LostFocus"/>
                            <TextBox x:Name="PasswordRevealTextBox"
                                     Style="{StaticResource ModernTextBoxInnerStyle}"
                                     Visibility="Collapsed"
                                     GotFocus="PasswordRevealTextBox_GotFocus"
                                     TextChanged="PasswordRevealTextBox_TextChanged"/>
                            <TextBlock x:Name="PasswordPlaceholder"
                                       Text="Create a password"
                                       Foreground="{StaticResource TextSecondary}"
                                       FontSize="14"
                                       Margin="16,8,40,8"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False"/>
                        </Grid>
                        <Button x:Name="PasswordEyeButton" Grid.Column="1"
                                Width="40" Height="36"
                                VerticalAlignment="Center"
                                Margin="0,0,8,0"
                                Background="Transparent"
                                BorderThickness="0"
                                Cursor="Hand"
                                Click="PasswordEyeButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" Padding="6">
                                        <Viewbox Width="20" Height="20">
                                            <Grid Width="24" Height="24">
                                                <Path Stroke="{DynamicResource Brush.TextSecondary}" StrokeThickness="1.25" Fill="Transparent" Data="M 12,5.5 C 7,5.5 2.5,9 1,12 2.5,15 7,18.5 12,18.5 17,18.5 21.5,15 23,12 21.5,9 17,5.5 12,5.5 Z"/>
                                                <Ellipse Width="8" Height="8" Stroke="{DynamicResource Brush.TextSecondary}" StrokeThickness="1.25" Fill="Transparent" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Grid>
                                        </Viewbox>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                </Border>
                <TextBlock x:Name="PasswordErrorText"
                           Text="" 
                           FontSize="11" 
                           Foreground="{StaticResource ErrorText}"
                           Margin="4,0,0,12"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>
                
                <!-- Confirm Password Field -->
                <TextBlock Text="Confirm Password" 
                           FontSize="12" 
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondary}"
                           Margin="0,0,0,10"/>
                <Border x:Name="ConfirmPasswordFieldBorder"
                        Background="{StaticResource InputBackground}"
                        BorderBrush="{StaticResource InputBorder}"
                        BorderThickness="1"
                        CornerRadius="8"
                        MinHeight="44"
                        Margin="0,0,0,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="0">
                            <PasswordBox x:Name="ConfirmPasswordBox"
                                         Style="{StaticResource ModernPasswordBoxInnerStyle}"
                                         GotFocus="ConfirmPasswordBox_GotFocus"
                                         PasswordChanged="ConfirmPasswordBox_PasswordChanged"
                                         LostFocus="ConfirmPasswordBox_LostFocus"/>
                            <TextBox x:Name="ConfirmPasswordRevealTextBox"
                                     Style="{StaticResource ModernTextBoxInnerStyle}"
                                     Visibility="Collapsed"
                                     GotFocus="ConfirmPasswordRevealTextBox_GotFocus"
                                     TextChanged="ConfirmPasswordRevealTextBox_TextChanged"/>
                            <TextBlock x:Name="ConfirmPasswordPlaceholder"
                                       Text="Re-enter your password"
                                       Foreground="{StaticResource TextSecondary}"
                                       FontSize="14"
                                       Margin="16,8,40,8"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False"/>
                        </Grid>
                        <Button x:Name="ConfirmPasswordEyeButton" Grid.Column="1"
                                Width="40" Height="36"
                                VerticalAlignment="Center"
                                Margin="0,0,8,0"
                                Background="Transparent"
                                BorderThickness="0"
                                Cursor="Hand"
                                Click="ConfirmPasswordEyeButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" Padding="6">
                                        <Viewbox Width="20" Height="20">
                                            <Grid Width="24" Height="24">
                                                <Path Stroke="{DynamicResource Brush.TextSecondary}" StrokeThickness="1.25" Fill="Transparent" Data="M 12,5.5 C 7,5.5 2.5,9 1,12 2.5,15 7,18.5 12,18.5 17,18.5 21.5,15 23,12 21.5,9 17,5.5 12,5.5 Z"/>
                                                <Ellipse Width="8" Height="8" Stroke="{DynamicResource Brush.TextSecondary}" StrokeThickness="1.25" Fill="Transparent" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Grid>
                                        </Viewbox>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                </Border>
                <TextBlock x:Name="ConfirmPasswordErrorText"
                           Text="" 
                           FontSize="11" 
                           Foreground="{StaticResource ErrorText}"
                           Margin="4,0,0,12"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>
                
                <!-- Sign Up and Back buttons -->
                <Grid Margin="0,12,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="SignUpButton" Grid.Column="0"
                            Content="Continue Setup"
                            Style="{StaticResource LaunchButtonStyle}"
                            Click="ContinueSetup_Click"
                            IsEnabled="False"/>
                    <Button Grid.Column="2" Content="Back" Style="{StaticResource BackButtonStyle}" Click="Back_Click"/>
                </Grid>
                
                <!-- Sign In Link -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,16,0,0">
                    <TextBlock Text="Already have an account? " 
                               FontSize="14" 
                               Foreground="{StaticResource TextSecondary}"/>
                    <Button Content="Sign In" 
                            Style="{StaticResource LinkButtonStyle}"
                            Click="SignIn_Click"
                            Padding="4,0"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
