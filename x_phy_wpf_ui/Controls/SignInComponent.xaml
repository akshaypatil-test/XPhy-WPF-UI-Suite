<UserControl x:Class="x_phy_wpf_ui.Controls.SignInComponent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1000">
    <UserControl.Resources>
        <!-- No local resources needed - using centralized design system -->
    </UserControl.Resources>

    <Grid Background="Transparent">
        <!-- Main Content -->
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel VerticalAlignment="Center" 
                        HorizontalAlignment="Left"
                        Width="400"
                        Margin="50,40,50,50">

                <!-- Title -->
                <TextBlock Text="Sign In" 
                           Style="{StaticResource Text.Title}"
                           TextAlignment="Center"
                           Margin="{StaticResource Margin.FieldGroup}"/>

                <TextBlock Text="Enter your credentials to continue" 
                           Style="{StaticResource Text.BodySecondary}"
                           TextAlignment="Center"
                           Margin="{StaticResource Margin.ContentBottom}"/>

                <!-- Error Message -->
                <TextBlock x:Name="ErrorMessageText"
                           Text="" 
                           Style="{StaticResource Text.ErrorMessage}"
                           TextAlignment="Center"
                           TextWrapping="Wrap"
                           Margin="{StaticResource Margin.SectionBottom}"
                           Visibility="Collapsed"/>

                <!-- Username/Email Field: label left, Forgot Username? right -->
                <Grid Margin="{StaticResource Margin.FieldGroup}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Username" 
                               Style="{StaticResource Text.CaptionBold}"
                               VerticalAlignment="Center"/>
                    <Button Grid.Column="2" Content="Forgot Username?" 
                            Style="{StaticResource Button.Link}"
                            Click="ForgotUsername_Click"
                            VerticalAlignment="Center"/>
                </Grid>
                <Border x:Name="UsernameFieldBorder"
                        Style="{StaticResource Border.InputContainer}"
                        Margin="{StaticResource Margin.FieldBottom}">
                    <Grid>
                        <TextBox x:Name="UsernameTextBox"
                                 Style="{StaticResource TextBox.Inner}"
                                 GotFocus="UsernameTextBox_GotFocus"
                                 TextChanged="UsernameTextBox_TextChanged"
                                 LostFocus="UsernameTextBox_LostFocus"
                                 KeyDown="SignInForm_KeyDown"/>
                        <TextBlock x:Name="UsernamePlaceholder"
                                   Text="Enter your email address"
                                   Style="{StaticResource TextBlock.Placeholder}"/>
                    </Grid>
                </Border>
                <TextBlock x:Name="EmailErrorText"
                           Text="" 
                           Style="{StaticResource Text.Error}"
                           Margin="4,0,0,8"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>

                <!-- Password Field: label left, Forgot Password? right -->
                <Grid Margin="{StaticResource Margin.FieldGroup}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Password" 
                               Style="{StaticResource Text.CaptionBold}"
                               VerticalAlignment="Center"/>
                    <Button Grid.Column="2" Content="Forgot Password?" 
                            Style="{StaticResource Button.Link}"
                            Click="ForgotPassword_Click"
                            VerticalAlignment="Center"/>
                </Grid>
                <Border x:Name="PasswordFieldBorder"
                        Style="{StaticResource Border.InputContainer}"
                        Margin="{StaticResource Margin.FieldBottom}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="0">
                            <PasswordBox x:Name="PasswordBox"
                                         Style="{StaticResource PasswordBox.Inner}"
                                         GotFocus="PasswordBox_GotFocus"
                                         PasswordChanged="PasswordBox_PasswordChanged"
                                         LostFocus="PasswordBox_LostFocus"
                                         KeyDown="SignInForm_KeyDown"/>
                            <TextBox x:Name="PasswordRevealTextBox"
                                     Style="{StaticResource TextBox.InnerWithIcon}"
                                     Visibility="Collapsed"
                                     GotFocus="PasswordRevealTextBox_GotFocus"
                                     TextChanged="PasswordRevealTextBox_TextChanged"
                                     KeyDown="SignInForm_KeyDown"/>
                            <TextBlock x:Name="PasswordPlaceholder"
                                       Text="Enter your password"
                                       Foreground="{DynamicResource Brush.TextSecondary}"
                                       FontSize="14"
                                       Margin="16,8,40,8"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False"/>
                        </Grid>
                        <Button x:Name="PasswordEyeButton" Grid.Column="1"
                                Width="40" Height="36"
                                Style="{StaticResource Button.Icon}"
                                VerticalAlignment="Center"
                                Margin="0,0,8,0"
                                Click="PasswordEyeButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" Padding="6">
                                        <Viewbox Width="20" Height="20">
                                            <Grid Width="24" Height="24">
                                                <!-- Outline eye shape (almond) -->
                                                <Path Stroke="{DynamicResource Brush.TextSecondary}" StrokeThickness="1.25" Fill="Transparent"
                                                      Data="M 12,5.5 C 7,5.5 2.5,9 1,12 2.5,15 7,18.5 12,18.5 17,18.5 21.5,15 23,12 21.5,9 17,5.5 12,5.5 Z"/>
                                                <!-- Pupil: perfectly round outlined circle (iris) -->
                                                <Ellipse Width="8" Height="8" Stroke="{DynamicResource Brush.TextSecondary}" StrokeThickness="1.25" Fill="Transparent"
                                                         HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Grid>
                                        </Viewbox>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                </Border>
                <TextBlock x:Name="PasswordErrorText"
                           Text="" 
                           Style="{StaticResource Text.Error}"
                           Margin="4,0,0,8"
                           Visibility="Collapsed"
                           TextWrapping="Wrap"/>

                <!-- Remember Me -->
                <CheckBox x:Name="RememberMeCheckBox"
                          Content="Remember Me"
                          Style="{StaticResource CheckBox.Standard}"
                          IsChecked="True"
                          Margin="{StaticResource Spacing.S}"
                          VerticalAlignment="Center"/>

                <!-- Sign In and Back buttons -->
                <Grid Margin="{StaticResource Spacing.M}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="SignInButton" Grid.Column="0"
                            Style="{StaticResource Button.Primary}"
                            Click="SignIn_Click"
                            IsEnabled="False">
                        <StackPanel x:Name="SignInButtonContent" Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock Text="Sign In" Style="{StaticResource Text.Button}"/>
                        </StackPanel>
                    </Button>
                    <Button Grid.Column="2" Content="Back" Style="{StaticResource Button.Back}" Click="Back_Click"/>
                </Grid>

                <!-- Sign Up Link: inside main content so it's responsive -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center" 
                            Margin="{StaticResource Margin.SectionBottom}">
                    <TextBlock Text="Don't have an account? " 
                               Style="{StaticResource Text.BodySecondary}"
                               VerticalAlignment="Center"/>
                    <Button Content="Create Account" 
                            Style="{StaticResource Button.Link}"
                            Click="CreateAccount_Click"
                            VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
